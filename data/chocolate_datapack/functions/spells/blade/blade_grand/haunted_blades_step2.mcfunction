#Summon invisible mobs that control the summon

execute as @s[scores={kill_timer=..1}] at @s run summon vex ~1 ~-1 ~1 {active_effects:[{id:"invisibility",duration:100000,show_particles:false},{id:"weakness",duration:100000,amplifier:100,show_particles:false},{id:"resistance",amplifier:100,show_particles:false,duration:100000}],Attributes:[{Name:"generic.knockback_resistance",Base:100},{Name:"generic.attack_damage",Base:0},{Name:"generic.follow_range",Base:64},{Name:"generic.attack_speed",Base:0}],Tags:["haunted_blades_vex","summon","offensive","blade",],Silent:1b}
execute as @s[scores={kill_timer=..1}] at @s run summon vex ~1 ~-1 ~-1 {active_effects:[{id:"invisibility",duration:100000,show_particles:false},{id:"weakness",duration:100000,amplifier:100,show_particles:false},{id:"resistance",amplifier:100,show_particles:false,duration:100000}],Attributes:[{Name:"generic.knockback_resistance",Base:100},{Name:"generic.attack_damage",Base:0},{Name:"generic.follow_range",Base:64},{Name:"generic.attack_speed",Base:0}],Tags:["haunted_blades_vex","summon","offensive","blade",],Silent:1b}
execute as @s[scores={kill_timer=..1}] at @s run summon vex ~-1 ~-1 ~1 {active_effects:[{id:"invisibility",duration:100000,show_particles:false},{id:"weakness",duration:100000,amplifier:100,show_particles:false},{id:"resistance",amplifier:100,show_particles:false,duration:100000}],Attributes:[{Name:"generic.knockback_resistance",Base:100},{Name:"generic.attack_damage",Base:0},{Name:"generic.follow_range",Base:64},{Name:"generic.attack_speed",Base:0}],Tags:["haunted_blades_vex","summon","offensive","blade",],Silent:1b}
execute as @s[scores={kill_timer=..1}] at @s run summon vex ~-1 ~-1 ~-1 {active_effects:[{id:"invisibility",duration:100000,show_particles:false},{id:"weakness",duration:100000,amplifier:100,show_particles:false},{id:"resistance",amplifier:100,show_particles:false,duration:100000}],Attributes:[{Name:"generic.knockback_resistance",Base:100},{Name:"generic.attack_damage",Base:0},{Name:"generic.follow_range",Base:64},{Name:"generic.attack_speed",Base:0}],Tags:["haunted_blades_vex","summon","offensive","blade",],Silent:1b}
execute as @s[scores={kill_timer=..1}] at @s run summon vex ~2 ~-1 ~-1 {active_effects:[{id:"invisibility",duration:100000,show_particles:false},{id:"weakness",duration:100000,amplifier:100,show_particles:false},{id:"resistance",amplifier:100,show_particles:false,duration:100000}],Attributes:[{Name:"generic.knockback_resistance",Base:100},{Name:"generic.attack_damage",Base:0},{Name:"generic.follow_range",Base:64},{Name:"generic.attack_speed",Base:0}],Tags:["haunted_blades_vex","summon","offensive","blade",],Silent:1b}
execute as @s[scores={kill_timer=..1}] at @s run summon vex ~2 ~-1 ~1 {active_effects:[{id:"invisibility",duration:100000,show_particles:false},{id:"weakness",duration:100000,amplifier:100,show_particles:false},{id:"resistance",amplifier:100,show_particles:false,duration:100000}],Attributes:[{Name:"generic.knockback_resistance",Base:100},{Name:"generic.attack_damage",Base:0},{Name:"generic.follow_range",Base:64},{Name:"generic.attack_speed",Base:0}],Tags:["haunted_blades_vex","summon","offensive","blade",],Silent:1b}
execute as @s[scores={kill_timer=..1}] at @s run summon vex ~-2 ~-1 ~-1 {active_effects:[{id:"invisibility",duration:100000,show_particles:false},{id:"weakness",duration:100000,amplifier:100,show_particles:false},{id:"resistance",amplifier:100,show_particles:false,duration:100000}],Attributes:[{Name:"generic.knockback_resistance",Base:100},{Name:"generic.attack_damage",Base:0},{Name:"generic.follow_range",Base:64},{Name:"generic.attack_speed",Base:0}],Tags:["haunted_blades_vex","summon","offensive","blade",],Silent:1b}
execute as @s[scores={kill_timer=..1}] at @s run summon vex ~-2 ~-1 ~1 {active_effects:[{id:"invisibility",duration:100000,show_particles:false},{id:"weakness",duration:100000,amplifier:100,show_particles:false},{id:"resistance",amplifier:100,show_particles:false,duration:100000}],Attributes:[{Name:"generic.knockback_resistance",Base:100},{Name:"generic.attack_damage",Base:0},{Name:"generic.follow_range",Base:64},{Name:"generic.attack_speed",Base:0}],Tags:["haunted_blades_vex","summon","offensive","blade",],Silent:1b}
execute as @s[scores={kill_timer=..1}] at @s run summon vex ~-2 ~-1 ~2 {active_effects:[{id:"invisibility",duration:100000,show_particles:false},{id:"weakness",duration:100000,amplifier:100,show_particles:false},{id:"resistance",amplifier:100,show_particles:false,duration:100000}],Attributes:[{Name:"generic.knockback_resistance",Base:100},{Name:"generic.attack_damage",Base:0},{Name:"generic.follow_range",Base:64},{Name:"generic.attack_speed",Base:0}],Tags:["haunted_blades_vex","summon","offensive","blade",],Silent:1b}
execute as @s[scores={kill_timer=..1}] at @s run summon vex ~2 ~-1 ~-2 {active_effects:[{id:"invisibility",duration:100000,show_particles:false},{id:"weakness",duration:100000,amplifier:100,show_particles:false},{id:"resistance",amplifier:100,show_particles:false,duration:100000}],Attributes:[{Name:"generic.knockback_resistance",Base:100},{Name:"generic.attack_damage",Base:0},{Name:"generic.follow_range",Base:64},{Name:"generic.attack_speed",Base:0}],Tags:["haunted_blades_vex","summon","offensive","blade",],Silent:1b}
execute as @s[scores={kill_timer=..1}] at @s positioned ~ ~ ~ as @e[tag=haunted_blades_vex,distance=..3] run scoreboard players set @s kill_timer 2400

#summon the animated swords
execute as @s[scores={kill_timer=..1}] at @s positioned ~1 ~-1 ~1 run function animated_java:haunted_blades/summon
execute as @s[scores={kill_timer=..1}] at @s positioned ~1 ~-1 ~-1 run function animated_java:haunted_blades/summon
execute as @s[scores={kill_timer=..1}] at @s positioned ~-1 ~-1 ~1 run function animated_java:haunted_blades/summon
execute as @s[scores={kill_timer=..1}] at @s positioned ~-1 ~-1 ~-1 run function animated_java:haunted_blades/summon
execute as @s[scores={kill_timer=..1}] at @s positioned ~2 ~-1 ~-1 run function animated_java:haunted_blades/summon
execute as @s[scores={kill_timer=..1}] at @s positioned ~2 ~-1 ~1 run function animated_java:haunted_blades/summon
execute as @s[scores={kill_timer=..1}] at @s positioned ~-2 ~-1 ~-1 run function animated_java:haunted_blades/summon
execute as @s[scores={kill_timer=..1}] at @s positioned ~-2 ~-1 ~1 run function animated_java:haunted_blades/summon
execute as @s[scores={kill_timer=..1}] at @s positioned ~-2 ~-1 ~2 run function animated_java:haunted_blades/summon
execute as @s[scores={kill_timer=..1}] at @s positioned ~2 ~-1 ~-2 run function animated_java:haunted_blades/summon
#place tags on all the stuff
execute as @s[scores={kill_timer=..1}] at @s positioned ~ ~-1 ~ as @e[tag=aj.haunted_blades.root,tag=!haunted_blades_animation,distance=..3] run tag @s add offensive
execute as @s[scores={kill_timer=..1}] at @s positioned ~ ~-1 ~ as @e[tag=aj.haunted_blades.root,tag=!haunted_blades_animation,distance=..3] run tag @s add haunted_blades_animated_mob
execute as @s[scores={kill_timer=..1}] at @s positioned ~ ~-1 ~ as @e[tag=aj.haunted_blades.bone,tag=!haunted_blades_animation1,distance=..3] run tag @s add offensive
execute as @s[scores={kill_timer=..1}] at @s positioned ~ ~-1 ~ as @e[tag=aj.haunted_blades.root,tag=!haunted_blades_animation,distance=..3] run scoreboard players set @s kill_timer 2400
execute as @s[scores={kill_timer=..1}] at @s positioned ~ ~-1 ~ as @e[tag=aj.haunted_blades.bone,tag=!haunted_blades_animation1,distance=..3] run scoreboard players set @s kill_timer 2400
#initialize animation timer
execute as @s[scores={kill_timer=..1}] at @s positioned ~ ~-1 ~ as @e[tag=haunted_blades_vex,distance=..3] run scoreboard players set @s animation_cooldown 0
execute as @s[scores={kill_timer=..1}] at @s positioned ~ ~-1 ~ as @e[tag=haunted_blades_vex,distance=..3] run scoreboard players set @s summoned_target 0
#put player's spell ID on the spell
execute as @s[scores={kill_timer=..1}] at @s positioned ~ ~-1 ~ run scoreboard players operation @e[distance=..3,tag=haunted_blades_vex] player_id = @s player_id
execute as @s[scores={kill_timer=..1}] at @s positioned ~ ~-1 ~ run scoreboard players operation @e[tag=aj.haunted_blades.root,distance=..3,tag=!haunted_blades_animation] player_id = @s player_id
#put player's team ID on the spell
execute as @s[scores={kill_timer=..1,team_id=1..}] at @s positioned ~ ~-1 ~ run scoreboard players operation @e[distance=..3,tag=haunted_blades_vex] team_id = @s team_id
execute as @s[scores={kill_timer=..1,team_id=1..}] at @s positioned ~ ~-1 ~ run scoreboard players operation @e[tag=aj.haunted_blades.root,distance=..3,tag=!haunted_blades_animation] team_id = @s team_id

